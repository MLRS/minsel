extends layout

mixin etym(es,lang_class)
  for e in es
    if groups.hasOwnProperty(lang_class) && groups[lang_class].indexOf(e.language) > -1
      div
        strong= e.language
              | &nbsp;
        if e.word_native
          span= e.word_native
          | &nbsp;
        em= e.word
          | &nbsp;
        if e.reference
          span.text-muted (#{e.reference})

block content
  h1= title

  table.table
    //- thead
    //-   tr
    //-     th Lemma
    //-     th Senses
    //-     th Etymology
    tbody
      for d in data
        tr
          td.col-md-2
            div(style="font-size:2em;margin-bottom:0").lead
              em= d.lemma
              | &nbsp;
              a(href="#{baseURL}/edit/#{d._id}").btn.btn-warning.btn-xs Edit
            div
              for v, k in d
                if ['_id','lemma','root','senses','etymology'].indexOf(k) === -1
                  if v === true
                    = k
                  else
                    = v
                  | 
              if d.root
                div
                  = d.root.radicals
                  if d.root.variant
                    sup.text-muted= d.root.variant
          td.col-md-6
            h4 Senses
            ol
              if d.senses
                for s in d.senses
                  li= s.description.join(', ')
                    div.text-muted= s.etymologies.join(', ')
          td.col-md-4
            if d.etymology
              h4 Arabic &amp; dialects
              +etym(d.etymology, 'arabic')
              +etym(d.etymology, 'levantine-arabic')
              h4 Wider Semitic Area
              +etym(d.etymology, 'semitic')
              +etym(d.etymology, 'ethiopic')
