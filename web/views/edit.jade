extends layout

block content
  h1= title
  a.btn.btn-success#btn_save Save
  a.btn.btn-danger#btn_delete Delete

  div#editor_holder

  script.
    var element = document.getElementById('editor_holder')
    var editor = new JSONEditor(element, {
      schema: !{schema},
      theme: "bootstrap3",
      iconlib: "bootstrap3",
    })
    $(document).ready(function () {
      $.ajax({
        method: "GET",
        url: "/entries/#{id}",
        success: function (data) {
          editor.setValue(data)
        }
      })
    })
    $("#btn_save").click(function () {
      $.ajax({
        method: "POST",
        url: "/entries/#{id}",
        data: editor.getValue()
      })
    })
    $("#btn_delete").click(function () {
      $.ajax({
        method: "DELETE",
        url: "/entries/#{id}"
      })
    })
